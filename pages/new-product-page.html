<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ceylon Mart | Shop</title>

  <link rel="icon" type="image/png" href="../assets/images/logo.png" />

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

  <!-- YOUR CSS -->
  <link rel="stylesheet" href="../css/style.css" />

  <!-- Firebase compat SDKs -->
 <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>

  <!-- EmailJS (optional) -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Must define window.db, window.productsCol, window.ordersCol -->
  <script src="../js/firebase.js"></script>
</head>

<body>
  <!-- NAV -->
  <header class="navbar">
    <div class="container nav-inner">
      <div class="logo-container">
        <img src="../assets/images/logo.png" alt="Ceylon Mart" class="logo" />
        <a href="../index.html" class="brand">Ceylon Mart</a>
      </div>


      <button class="nav-cart-btn" type="button" onclick="scrollToCart()" aria-label="Go to cart">
        <i class="fa-solid fa-cart-shopping"></i>
        <span class="nav-cart-badge" id="navCartCount" style="display:none;">0</span>
      </button>

      <div class="burger">
        <div class="line1"></div>
        <div class="line2"></div>
        <div class="line3"></div>
      </div>

      <div class="nav-links">
        <a href="../index.html">Home</a>
        <a href="#" class="active">Shop</a>
        <a href="admin.html">Admin</a>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container" id="shop">
    <header class="page-head">
      <h1>Fresh Products</h1>
      <p>Best quality items delivered to your doorstep.</p>
    </header>

    <div class="shop-layout">
      <!-- LEFT: Products -->
      <div class="shop-main">
        <div class="shop-toolbar">
          <button class="btn btn-outline filter-open" type="button" onclick="openFilterDrawer()">
            <i class="fa-solid fa-filter"></i> Filter
          </button>

          <div class="filter-summary" id="filterSummary"></div>
        </div>

        <section id="products" class="product-list"></section>
        <div id="pagination" class="pagination"></div>
      </div>

      <!-- RIGHT: Cart -->
      <aside class="shop-sidebar" id="cartSection">
        <section class="cart-section">
          <h3 class="cart-title">ðŸ›’ Your Cart</h3>

          <div id="cartItems" class="cart-items">
            <p class="empty">Cart is empty</p>
          </div>

          <div class="total">Total: C$ <span id="total">0</span></div>

          <div id="deliveryFeeRow" class="total" style="display:none; margin-top:8px;">
            Delivery Fee: C$ <span id="deliveryFee">0</span>
          </div>

          <div class="total" style="margin-top:8px;">
            Grand Total: C$ <span id="grandTotal">0</span>
          </div>

          <div class="checkout-section">
            <h4>Checkout Details</h4>

            <input id="customerName" type="text" placeholder="Full Name" required />
            <input id="customerPhone" type="text" placeholder="Phone Number" required />
            <input id="customerEmail" type="email" placeholder="Email Address" required />

            <div id="addressField" style="display:none;">
              <input id="customerAddress" type="text" placeholder="Address" />
            </div>

            <div class="radio-group">
              <label><input type="radio" name="deliveryType" value="Pickup" checked> Pickup</label>
              <label><input type="radio" name="deliveryType" value="Delivery"> Delivery</label>
            </div>

            <textarea id="customerNote" placeholder="Add a note (optional)" rows="3"></textarea>

            <button class="btn w-100" onclick="sendOrder()">Place Order</button>
          </div>
        </section>
      </aside>
    </div>
  </main>

  <!-- FILTER DRAWER -->
  <div id="filterDrawerOverlay" class="drawer-overlay" aria-hidden="true">
    <aside id="filterDrawer" class="drawer" role="dialog" aria-modal="true" aria-labelledby="filterTitle">
      <div class="drawer-head">
        <h3 id="filterTitle">Filters</h3>
        <button class="drawer-close" type="button" onclick="closeFilterDrawer()" aria-label="Close">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <div class="drawer-body">
        <div class="drawer-field">
          <label>Category</label>
          <select id="filterCategory">
            <option value="">All Categories</option>
          </select>
        </div>

        <div class="drawer-field">
          <label>Brand</label>
          <select id="filterBrand">
            <option value="">All Brands</option>
          </select>
        </div>
      </div>

      <div class="drawer-actions">
        <button class="btn btn-outline" type="button" onclick="clearFilters(); closeFilterDrawer();">Clear</button>
        <button class="btn" type="button" onclick="applyFilters(); closeFilterDrawer();">Apply</button>
      </div>
    </aside>
  </div>

  <!-- HOW TO ORDER POPUP -->
  <div id="howToOrderPopup" class="popup-overlay" aria-hidden="true">
    <div class="popup-card" role="dialog" aria-modal="true" aria-labelledby="howtoTitle">
      <div class="popup-head">
        <div>
          <h2 id="howtoTitle">How to Order</h2>
          <p class="popup-sub">Follow these steps to place your order.</p>
          <p class="popup-sub"> Need Help? Please chat with us on <a href="https://wa.me/+17096909972" target="_blank">WhatsApp</a>.</p>
        </div>

        <button class="popup-x" id="howtoCloseBtn" aria-label="Close popup">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <ol class="howto-list">
        <li>Select products and click <span class="pill">Add</span>.</li>
        <li>Open your <span class="pill soft">Cart</span> to review items.</li>
        <li>Enter your <b>Name</b>, <b>Phone</b>, and <b>Address</b>.</li>
        <li>Click <span class="pill">Place Order</span> to confirm.</li>
      </ol>

      <div class="popup-actions">
        <button class="btn btn-outline" id="dontShowHowToBtn" type="button">Donâ€™t show again</button>
        <a class="btn-primary" href="#shop" id="startShoppingBtn">Start Shopping</a>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <p>
        Copyright &copy; 2026. Developed with
        <span style="color: var(--primary)">&hearts;</span>
        by <strong>Asheen Global Solutions</strong>.
      </p>
    </div>
  </footer>

  <!-- YOUR JS -->
  <script src="../js/product-page.js"></script>
  <script src="../js/whatsapp-widget.js"></script>
</body>
</html>